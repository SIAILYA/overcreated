{% extends "index.njk" %}

{% block content %}
    <h2 class="mb-4 text-center">Редактирование проекта</h2>
    <form action="/admin/edit_project/{{ project._id.toString() }}" method="post">
        <div class="row">
            <div class="col-12 col-md-6">
                <input type="text" autocomplete="off" name="name" value="{{ project.name }}" class="form-control"
                       placeholder="Название проекта">
            </div>
            <div class="col-12 col-md-6 mt-2 mt-md-0">
                <input type="text" autocomplete="off" name="slug" value="{{ project.slug }}" class="form-control" placeholder="Slug">
            </div>
            <div class="col-12 col-md-6 mt-2">
                <textarea type="text" name="shortDescription"
                          class="form-control"
                          placeholder="Короткое описание" rows="1">{{ project.shortDescription }}</textarea>
            </div>
            <div class="col-6 col-md-3 mt-2">
                <input type="number" name="developTime" value="{{ project.developTime }}" class="form-control"
                       placeholder="Время на разработку">
            </div>
            <div class="col-6 col-md-3 mt-2">
                <input type="text" autocomplete="off" name="demoLink" value="{{ project.demoLink }}" class="form-control"
                       placeholder="Ссылка на демо">
            </div>
            <div class="col-6 col-md-3 mt-2">
                <input type="text" autocomplete="off" name="gitHubLink" value="{{ project.gitHubLink }}" class="form-control"
                       placeholder="Ссылка на Гитхаб">
            </div>
            <div class="col-6 col-md-3 mt-2">
                <input type="text" autocomplete="off" name="behanceLink" value="{{ project.behanceLink }}" class="form-control"
                       placeholder="Ссылка на Беханс">
            </div>
            <div class="col-6 col-md-3 mt-2">
                <input type="text" autocomplete="off" value="{{ project.color[0] }}" name="color1" class="form-control" placeholder="Цвет 1">
            </div>
            <div class="col-6 col-md-3 mt-2">
                <input type="text" autocomplete="off" value="{{ project.color[1] }}" name="color2" class="form-control" placeholder="Цвет 2">
            </div>
            <div class="col-12 mt-2">
                <textarea type="text" name="description" id="description"
                          class="form-control"
                          placeholder="Описание">{{ project.description }}</textarea>
            </div>
            <div class="col-12 col-md-6">
                <h4>Топики:</h4>
                {% for topic in allTopics %}
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="topic_{{ topic.slug }}"
                               value="{{ topic._id }}"
                                {% if project.topics.indexOf(topic._id.toString()) !== -1 %}
                                    checked
                                {% endif %}
                               id="{{ topic.slug }}_checkbox">
                        <label class="form-check-label" for="{{ topic.slug }}_checkbox">
                            {{ topic.name }}
                        </label>
                    </div>
                {% endfor %}
            </div>
            <div class="col-12 col-md-6">
                <h4>Технологии</h4>
                <input type="text" autocomplete="off" placeholder="Технологии через запятую" name="techs" value="{{ project.techs | join(", ") }}"
                       class="form-control">
            </div>
            {# TODO: добавить фотки #}
            <div class="col-12 mt-3">
                <button class="btn btn-success me-2">Сохранить</button>
                <a href="/admin/delete_project/{{ project._id.toString() }}" class="d-inline-block btn btn-danger">
                    Удалить
                </a>
            </div>
        </div>
    </form>
{% endblock %}

{% block scripts %}
    <script>
        var simplemde = new SimpleMDE({element: document.getElementById("description"), lineWrapping: false});
    </script>
{% endblock %}
